<div class="p-6 animate-fade-in">
    <button (click)="goBack()"
        class="mb-6 flex items-center text-indigo-600 hover:text-indigo-800 font-medium transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
                d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                clip-rule="evenodd" />
        </svg>
        Back to List
    </button>

    <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden max-w-2xl mx-auto">
        <div class="bg-indigo-600 p-6 text-white">
            <h2 class="text-2xl font-bold">Task Details</h2>
            <p class="opacity-80 text-sm mt-1">ID: #{{ todo.id }}</p>
        </div>

        <div class="p-8 space-y-6">
            <div *ngIf="!isEditing; else editForm">
                <div class="flex items-start justify-between">
                    <div>
                        <h3 class="text-lg font-semibold text-slate-700 mb-1">Description</h3>
                        <p class="text-slate-600 text-lg leading-relaxed">{{ todo.todo }}</p>
                    </div>
                    <span class="px-4 py-1.5 rounded-full text-sm font-bold shadow-sm"
                        [ngClass]="todo.completed ? 'bg-green-100 text-green-700 border border-green-200' : 'bg-amber-100 text-amber-700 border border-amber-200'">
                        {{ todo.completed ? 'Completed' : 'In Progress' }}
                    </span>
                </div>

                <div class="pt-6 mt-6 border-t border-slate-100 flex gap-4">
                    <button (click)="enableEdit()"
                        class="flex-1 bg-indigo-50 text-indigo-700 py-2.5 rounded-lg font-semibold hover:bg-indigo-100 transition-colors border border-indigo-200">
                        Edit Task
                    </button>
                    <button (click)="deleteTask()"
                        class="flex-1 bg-red-50 text-red-700 py-2.5 rounded-lg font-semibold hover:bg-red-100 transition-colors border border-red-200">
                        Delete Task
                    </button>
                </div>
            </div>

            <ng-template #editForm>
                <form [formGroup]="form" (ngSubmit)="saveEdit()">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Task Description</label>
                            <textarea formControlName="todo" rows="3"
                                class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" formControlName="completed" id="completed"
                                class="h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                            <label for="completed" class="ml-2 block text-sm text-slate-900">Mark as Completed</label>
                        </div>
                        <div class="flex gap-3 pt-4">
                            <button type="button" (click)="cancelEdit()"
                                class="flex-1 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 font-medium">
                                Cancel
                            </button>
                            <button type="submit" [disabled]="form.invalid"
                                class="flex-1 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium shadow-md">
                                Save Changes
                            </button>
                        </div>
                    </div>
                </form>
            </ng-template>

            <div class="bg-slate-50 rounded-lg p-4 border border-slate-100 mt-4">
                <p class="text-xs text-slate-400 font-mono">User ID: {{ todo.userId }}</p>
                <p class="text-xs text-slate-400 font-mono mt-1">Internal Ref: {{ todo.id }}</p>
            </div>
        </div>
    </div>
</div>